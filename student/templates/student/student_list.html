{% extends "Dashboard/index.html" %}

{% block title %}
Students-list-{{ block.super }}
{% endblock title %}

{% block style %}
{% include "base/css.html" %}
<style>
.side-23
{
    margin-left: 200px;
}

.chat-header {
    background: linear-gradient(90deg,#0047B2,#286bcf,#5e8acc);
    color: white;
    padding: 15px;
    text-align: center;
    /* box-shadow: 0 2px 5px rgba(0,0,0,0.1); */
    font-weight: bold;
    font-size: 1.8em;
}
.nav-studentbar1{
    display: flex;
    justify-content: space-between;
    width: 100%;
}

.student-section {
    width: 90%;
    margin: 0 auto;
    background-color: black;
    border-radius: 0%;
}

.student-create-btn {
    text-align: center;
    color: blue;
    margin-bottom: 20px;
}

.student-search {
    text-align: center;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    padding: 7px;
    padding-left: 10px;
    width: 30%;
    border:rgba(255, 255, 255, 0); /* Soft white border */
    border-radius: 18px;
    background: rgba(255, 255, 255, 0.2); /* Transparent glass effect */
    backdrop-filter: blur(10px); /* Frosted glass effect */
    box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1) ;
    height: 40px;
    margin-top: 15px;
    margin-left: 10px;
}

.student-search input {
    padding: 7px;
    padding-left: 10px;
    width: 50%;
    border:rgba(255, 255, 255, 0); 
    border-radius: 15px;
    background: rgba(255, 255, 255, 0.2); 
    backdrop-filter: blur(10px); 
    height: 20px;
    /* box-shadow: 0px 0px 6px 0px rgba(0,0,0,0.1) ; */
    /* box-shadow: 
        inset 5px -10px 15px rgba(255, 255, 255, 0.5), 
        inset -5px 10px 15px rgba(0, 0, 0, 0.2), 
         0px 4px 10px rgba(0, 0, 0, 0.1); 
     transition: all 0.6s ease-in-out; */
} 


/* .student-search input:hover {
    box-shadow: 
        inset 8px -15px 20px rgba(255, 255, 255, 0.6),
        inset -8px 15px 20px rgba(0, 0, 0, 0.3),
        0px 6px 15px rgba(0, 0, 0, 0.15);
    background: rgba(255, 255, 255, 0.3);
} */

#search-bar {
  padding: 8px 12px;
  border-radius: 4px;
  transition: none; 
}

#search-bar:focus {
  outline: none;
  border-color: #ccc;    /* keeps the same border color */
  box-shadow: none;      /* removes the blue glow in Chrome/Edge */
}


.styled-line {
    border: 1px solid #d8d8d8; /* Black border */
    width: 100%;             /* 80% width of the container */
    margin-bottom: 30px;
}    


.student-data {
    display: flex;
    justify-content: start;
    align-items: center;
    flex-direction: column;
    min-height: 100vh;
    padding: 20px;
}

.student-table-container {
    width: 100%;
    overflow-x: auto;
    display: flex;
    justify-content: center;
    align-items: center;
    border-color: #dddddd2d;
}

.student-main-table {
    width: 100%;
    border-collapse: separate; /* Important for applying border-radius */
    border-spacing: 0; /* Ensures borders are adjacent */
    border-radius: 10px; /* Apply border-radius to the entire table */
    overflow: hidden; /* Ensures the corners of the table are clipped */
}

.student-main-table th, .student-main-table td {
    border: 1px solid #dddddda6;
    padding: 8px;
    text-align: left;
    white-space: nowrap;
}

.student-main-table th {
    /* background-color: #0047b2ec;
    font-weight: bold; */
    color: #fff;
    
}

.btn-student-data button {
    border:rgba(0, 0, 0, 0);
    border-radius: 15px;
    color: #001570;
    background:#e9e9e9;
    font-weight:lighter;
    padding: 11px 20px 11px 20px;/* Order: TOP RIGHT BOTTOM LEFT */
    margin: 10px;
    box-shadow: 1px 2px 1px rgba(0, 0, 0, 0.15);
}

.btn-student-data button:hover {
    color: rgb(255, 255, 255);
    background: #0047B2;
    transform: scale(1.05); /* Slight zoom effect */
    transition: all 0.3s ease-in-out;
    cursor: pointer;
}

.btn-student-data button:not(:hover) {
    transition: all ease-in-out 0.3s; /* Adds a delay before shrinking */
}

.student-main-table th, .student-main-table td {
    padding: 10px 8px 10px 8px;
    text-align: left;
    white-space: nowrap;
    border-left: none; /* Remove left vertical border */
    border-right: none; /* Remove right vertical border */
    border-top: 1px solid #ddd; /* Ensure top border exists for all rows */
}

.student-main-table tr {
    border-bottom: 1px solid #ddd; /* Add horizontal borders between rows */
}

/* Add a bottom border for the last row to avoid any difference */
.student-main-table tr:last-child td {
    border-bottom: 2px solid #ddddddd8; /* Ensure the last row has a bottom border */
}



@media screen and (max-width: 768px) {
    .student-data {
        margin-left: 0;
        padding: 10px;
    }
    .student-main-table th, .student-main-table td {
        padding: 5px;
    }
    .btn-student-data button {
        padding: 8px;
        font-size: 14px;
    }
    .student-search input {
        width: 80%;
    }
}

.search-student-form{
    width:59%; 
    /* #percentage for dhrumil and aniket - 69 */
}

.back-to-list-btn{
    margin:0px 5px;
    background-color:red;
    cursor:pointer;
    padding:10px;
    color:white;
    border-radius:5px;
    font-weight:bolder;
    box-shadow: 2px 2px 2px rgb(41, 41, 41);
}

.search-to-specific-student{
    background-color:rgb(61, 219, 21);
    cursor:pointer;
    padding:10px;
    color:white;
    border-radius:5px;
    font-weight:bolder;
    box-shadow: 2px 2px 2px rgb(41, 41, 41);
}
</style>
{% endblock style %}

{% block content %}


<div class="side-23">
    <div class="chat-header">
        <h2>Student Data</h2>
    </div>
    <div class="student-data">
    
    <div class="nav-studentbar1">
        
    <div class="student-search">
        <form class="search-student-form">
        <i class="fas fa-search"></i>
        <input type="text" name="q" id="search-bar" placeholder="Search students...">
        <button type='submit' class="search-to-specific-student" >Search</button>
    </form>
        <a href="{% url 'student_data'%}"><button class="back-to-list-btn">Back to all</button></a>
    </div>
    
    <div class="student-create-btn">
        <a class="btn-student-data" href={% url 'create_student' %}><button>Add Student</button></a>
    </div> 
</div>


<hr class="styled-line">
    
    <div class="student-table-container">
        <table class="student-main-table">
            <thead style="background: linear-gradient(90deg,#0047B2,#286bcf,#5e8acc); font-weight: bold;">
                <tr>
                    <th>Student Name</th>
                    <th>Gender</th>
                    <th>email</th>
                    <th>Avg PAT Score</th>
                    <th>Avg SAT Score</th>
                    <th>Attendance</th>
                    <th>Standard</th>
                    <th>Performance</th>
                    <th>Add_marks</th>
                    <th>Delete-Student</th>
                    <th>Give Suggestion</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.name }}</td>
                    <td>{{ student.gender }}</td>
                    <td>{{ student.email}}</td>
                    <td>{{ student.avg_pat_score }}</td>
                    <td>{{ student.avg_sat_score }}</td>
                    <td>{{ student.attendance }}</td>
                    <td> {{student.standard.name}}
                </td>
                    <td>{% if student.performance_summary %}{{ student.performance_summary }}{% else %}Not Predicted{% endif %}</td>
                    <td >{% if is_teacher %}
                        <a href="{% url 'add_marks' student.student_id%}" style="color: #0047B2;"onmouseover="this.style.color='#001570';" onmouseout="this.style.color='#0047B2';">Add Marks</a>/
                        <a href="{% url 'edit_marks' student.pk%}" style="color: #0047B2;"onmouseover="this.style.color='#001570';" onmouseout="this.style.color='#0047B2';">Edit Marks</a>
                        
                        {% else %} 
                        not editable
                        {% endif %}
                    </td>
                    <td >
                        <a href="{% url 'student_delete' student.student_id%}" style="color: #0047B2;" onmouseover="this.style.color='#001570';" onmouseout="this.style.color='#0047B2';">Delete</a>
                    </td>
                    <td >
                        <a href="{% url 'personalize_suggestion' student.student_id%}" style="color: #0047B2;" onmouseover="this.style.color='#001570';" onmouseout="this.style.color='#0047B2';">Give Suggestion  </a>
                    </td>
                
                
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

        <a class="btn-student-data" href={% url 'export_students_csv' %}><button style="margin-top: 23px">Download CSV</button></a>
        <form method="post" enctype="multipart/form-data" action="{% url 'upload_file_student_data' %}">
            {% csrf_token %}
            <p>Note : follow the column pattern otherwise data will not be upload Required fields:[name,email,gender,attendance] or you can(optional) [name,email,gender,attendance,avg_pat,avg_sat] </p>
            <p>otherwise you need to add marks manually for each student to get performance</p>
            <input type="file" name="file" required>
            <button type="submit">Upload</button>
        </form>
        
        
  
  
   
</div>

{% endblock content %}

{% block script %}
{% include "base/js.html" %}
{% endblock script %}